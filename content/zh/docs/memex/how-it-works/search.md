---
title: 搜索
description: 全文、语义和混合搜索
navigation:
  order: 4
---

Memex 支持跨多个数据级别的三种搜索模式。

---

## 搜索模式

| 模式 | 引擎 | 最适合 |
|------|--------|----------|
| `fts` | SQLite FTS5 | 精确关键词、代码片段 |
| `vector` | LanceDB | 语义相似性、概念 |
| `hybrid` | 两者结合 | 通用搜索（默认）|

---

## 混合排序

混合模式使用倒数排名融合（RRF）结合 FTS 和向量结果：

```
score = Σ 1/(k + rank)
```

其中 `k=60` 平衡精确度和召回率。两个引擎的结果被合并并按组合分数重新排序。

---

## 搜索级别

搜索的内容取决于 `level` 参数。详见 [Compact](/docs/memex/how-it-works/compact#how-to-search)。

| 级别 | 搜索 | 最适合 |
|-------|----------|----------|
| `sessions` | L3 摘要 | 查找相关会话 |
| `talks` | L2 摘要 | 特定解决方案 |
| `raw` | L0 消息 | 确切措辞 |

**回退：** 如果当前级别没有结果，自动尝试下一级别。

---

## 向量搜索要求

向量搜索需要：
1. 带有 `bge-m3` 嵌入模型的 Ollama
2. 启用 Compact 以生成嵌入

没有这些，只有 FTS 模式可用。
